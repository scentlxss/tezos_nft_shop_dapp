{"ast":null,"code":"import _regeneratorRuntime from\"/opt/tezos/nft-shop-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/tezos/nft-shop-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{TezosToolkit}from\"@taquito/taquito\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DisconnectButton=function DisconnectButton(_ref){var wallet=_ref.wallet,setPublicToken=_ref.setPublicToken,setUserAddress=_ref.setUserAddress,setUserBalance=_ref.setUserBalance,setWallet=_ref.setWallet,setTezos=_ref.setTezos,setBeaconConnection=_ref.setBeaconConnection;var disconnectWallet=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tezosTK;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://window.localStorage.clear();\nsetUserAddress(\"\");setUserBalance(0);setWallet(null);tezosTK=new TezosToolkit(\"https://api.tez.ie/rpc/granadanet\");setTezos(tezosTK);setBeaconConnection(false);setPublicToken(null);console.log(\"disconnecting wallet\");if(!wallet){_context.next=15;break;}_context.next=11;return wallet.client.removeAllAccounts();case 11:_context.next=13;return wallet.client.removeAllPeers();case 13:_context.next=15;return wallet.client.destroy();case 15:case\"end\":return _context.stop();}}},_callee);}));return function disconnectWallet(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:disconnectWallet,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"}),\"\\xA0 Disconnect wallet\"]})});};export default DisconnectButton;","map":{"version":3,"sources":["/opt/tezos/nft-shop-example/src/components/DisconnectWallet.tsx"],"names":["React","TezosToolkit","DisconnectButton","wallet","setPublicToken","setUserAddress","setUserBalance","setWallet","setTezos","setBeaconConnection","disconnectWallet","tezosTK","console","log","client","removeAllAccounts","removeAllPeers","destroy"],"mappings":"iSAAA,MAAOA,CAAAA,KAAP,KAAgD,OAAhD,CAEA,OAASC,YAAT,KAA6B,kBAA7B,C,wFAYA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAQO,IAP9BC,CAAAA,MAO8B,MAP9BA,MAO8B,CAN9BC,cAM8B,MAN9BA,cAM8B,CAL9BC,cAK8B,MAL9BA,cAK8B,CAJ9BC,cAI8B,MAJ9BA,cAI8B,CAH9BC,SAG8B,MAH9BA,SAG8B,CAF9BC,QAE8B,MAF9BA,QAE8B,CAD9BC,mBAC8B,MAD9BA,mBAC8B,CAC9B,GAAMC,CAAAA,gBAAgB,2FAAG,+IACvB;AACAL,cAAc,CAAC,EAAD,CAAd,CACAC,cAAc,CAAC,CAAD,CAAd,CACAC,SAAS,CAAC,IAAD,CAAT,CACMI,OALiB,CAKP,GAAIV,CAAAA,YAAJ,CAAiB,mCAAjB,CALO,CAMvBO,QAAQ,CAACG,OAAD,CAAR,CACAF,mBAAmB,CAAC,KAAD,CAAnB,CACAL,cAAc,CAAC,IAAD,CAAd,CACAQ,OAAO,CAACC,GAAR,CAAY,sBAAZ,EATuB,IAUnBV,MAVmB,iDAWfA,CAAAA,MAAM,CAACW,MAAP,CAAcC,iBAAd,EAXe,gCAYfZ,CAAAA,MAAM,CAACW,MAAP,CAAcE,cAAd,EAZe,gCAafb,CAAAA,MAAM,CAACW,MAAP,CAAcG,OAAd,EAbe,wDAAH,kBAAhBP,CAAAA,gBAAgB,2CAAtB,CAiBA,mBACE,YAAK,SAAS,CAAC,SAAf,uBACE,gBAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEA,gBAApC,wBACE,UAAG,SAAS,CAAC,cAAb,EADF,4BADF,EADF,CAOD,CAjCD,CAmCA,cAAeR,CAAAA,gBAAf","sourcesContent":["import React, { Dispatch, SetStateAction } from \"react\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { TezosToolkit } from \"@taquito/taquito\";\n\ninterface ButtonProps {\n  wallet: BeaconWallet | null;\n  setPublicToken: Dispatch<SetStateAction<string | null>>;\n  setUserAddress: Dispatch<SetStateAction<string>>;\n  setUserBalance: Dispatch<SetStateAction<number>>;\n  setWallet: Dispatch<SetStateAction<any>>;\n  setTezos: Dispatch<SetStateAction<TezosToolkit>>;\n  setBeaconConnection: Dispatch<SetStateAction<boolean>>;\n}\n\nconst DisconnectButton = ({\n  wallet,\n  setPublicToken,\n  setUserAddress,\n  setUserBalance,\n  setWallet,\n  setTezos,\n  setBeaconConnection\n}: ButtonProps): JSX.Element => {\n  const disconnectWallet = async (): Promise<void> => {\n    //window.localStorage.clear();\n    setUserAddress(\"\");\n    setUserBalance(0);\n    setWallet(null);\n    const tezosTK = new TezosToolkit(\"https://api.tez.ie/rpc/granadanet\");\n    setTezos(tezosTK);\n    setBeaconConnection(false);\n    setPublicToken(null);\n    console.log(\"disconnecting wallet\");\n    if (wallet) {\n      await wallet.client.removeAllAccounts();\n      await wallet.client.removeAllPeers();\n      await wallet.client.destroy();\n    }\n  };\n\n  return (\n    <div className=\"buttons\">\n      <button className=\"button\" onClick={disconnectWallet}>\n        <i className=\"fas fa-times\"></i>&nbsp; Disconnect wallet\n      </button>\n    </div>\n  );\n};\n\nexport default DisconnectButton;\n"]},"metadata":{},"sourceType":"module"}